import React, { Component } from "react";
import PropTypes from "prop-types";
import { Link } from "react-router-dom";
import { connect } from "react-redux";
import { getCurrentProfile } from "../../actions/profileActions";
import { getLists } from "../../actions/listActions";
import Spinner from "../common/Spinner";
import DashboardContent from "./DashboardContent";
import Navbar from "../layout/Navbar"
// import OnBoardingContainer from "../on-boarding/create-pantry/onBoardingContainer"
// import Footer from "../layout/Footer"

class Dashboard extends Component {
  componentDidMount() {
    this.props.getCurrentProfile();
    this.props.getLists();
  }

  render() {
    const { profile, loading } = this.props.profile;

    let dashboardContent;

    if (profile === null || loading) {
      dashboardContent = <Spinner />;
    } else {
      // Check if logged in user has profile data
      if (Object.keys(profile).length > 0) {
        dashboardContent = <DashboardContent profile={profile} auth={this.props.auth} history={this.props.history}/>;
      } else {
        // User is logged in but has no profile
        dashboardContent = (
          <div className="mb-24">
            <Navbar />
            <div className="text-center">
            <svg className="mx-auto h-64 w-64" width="235" height="235" viewBox="0 0 235 235" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M235 0H0V235H235V0Z" fill="white"/>
            <path d="M212.467 81.3848C216.334 100.721 230.802 116.932 228.283 128.744C225.763 140.555 206.255 147.968 190.046 152.227C173.864 156.456 160.98 157.533 144.605 165.761C128.229 174.044 108.389 189.504 98.1536 185.438C87.9179 181.371 87.3136 157.748 77.6196 139.834C67.9255 121.976 49.114 109.8 44.1934 94.1443C39.3003 78.4594 48.2703 59.2679 63.6476 50.6464C78.9969 41.9983 100.726 43.8936 117.159 44.0274C133.592 44.2165 144.702 42.6179 161.295 37.8416C177.889 33.0653 199.964 25.0559 207.649 32.3223C215.334 39.5887 208.573 62.0784 212.467 81.3848Z" fill="#9AE6B4"/>
            <path d="M76.8108 196.449C79.7609 201.917 86.0222 204.263 86.0222 204.263C86.0222 204.263 87.5007 197.746 84.55 192.278C81.5998 186.81 75.3386 184.463 75.3386 184.463C75.3386 184.463 73.8606 190.981 76.8108 196.449Z" fill="#22543D"/>
            <path d="M78.8383 194.65C84.1648 197.852 86.2161 204.213 86.2161 204.213C86.2161 204.213 79.6318 205.382 74.3054 202.18C68.9789 198.977 66.9276 192.616 66.9276 192.616C66.9276 192.616 73.5118 191.448 78.8383 194.65Z" fill="#68D391"/>
            <path d="M140.285 35.5222H107.052V35.9967H140.285V35.5222Z" fill="#F2F2F2"/>
            <path d="M131.265 35.8782H130.79V40.2668H131.265V35.8782Z" fill="#F2F2F2"/>
            <path d="M116.785 35.8782H116.31V40.2668H116.785V35.8782Z" fill="#F2F2F2"/>
            <path d="M157.139 58.2959H123.906V58.7701H157.139V58.2959Z" fill="#F2F2F2"/>
            <path d="M133.401 54.0259H132.926V58.4145H133.401V54.0259Z" fill="#F2F2F2"/>
            <path d="M101.593 87.2366H68.3602V87.7113H101.593V87.2366Z" fill="#F2F2F2"/>
            <path d="M147.881 54.0259H147.406V58.4145H147.881V54.0259Z" fill="#F2F2F2"/>
            <path d="M201.291 68.9709H168.058V69.4452H201.291V68.9709Z" fill="#F2F2F2"/>
            <path d="M177.553 64.7009H177.078V69.0895H177.553V64.7009Z" fill="#F2F2F2"/>
            <path d="M192.033 64.7009H191.558V69.0895H192.033V64.7009Z" fill="#F2F2F2"/>
            <path d="M197.967 179.042H164.734V179.517H197.967V179.042Z" fill="#F2F2F2"/>
            <path d="M174.23 174.772H173.755V179.161H174.23V174.772Z" fill="#F2F2F2"/>
            <path d="M188.709 174.772H188.234V179.161H188.709V174.772Z" fill="#F2F2F2"/>
            <path d="M141.234 102.894H108.002V103.368H141.234V102.894Z" fill="#F2F2F2"/>
            <path d="M117.497 98.6235H117.022V103.012H117.497V98.6235Z" fill="#F2F2F2"/>
            <path d="M131.977 98.6235H131.502V103.012H131.977V98.6235Z" fill="#F2F2F2"/>
            <path d="M151.679 160.064H118.447V160.539H151.679V160.064Z" fill="#F2F2F2"/>
            <path d="M127.942 155.794H127.467V160.183H127.942V155.794Z" fill="#F2F2F2"/>
            <path d="M142.421 155.794H141.946V160.183H142.421V155.794Z" fill="#F2F2F2"/>
            <path d="M204.851 142.747H171.619V143.221H204.851V142.747Z" fill="#F2F2F2"/>
            <path d="M181.113 138.477H180.639V142.866H181.113V138.477Z" fill="#F2F2F2"/>
            <path d="M113.006 66.4676C115.281 62.4109 120.414 60.9672 124.47 63.2429L171.336 89.5334C175.392 91.8086 176.836 96.9417 174.56 100.998L148.27 147.863C145.995 151.92 140.861 153.363 136.805 151.088L89.9397 124.798C85.8836 122.522 84.4399 117.389 86.7156 113.333L113.006 66.4676Z" fill="#EE9986"/>
            <path d="M100.125 110.74C101.479 108.325 104.534 107.466 106.949 108.82L119.015 115.589C121.429 116.944 122.289 119.999 120.934 122.414L120.444 123.288C119.089 125.702 116.034 126.561 113.619 125.207L101.553 118.439C99.139 117.084 98.2796 114.028 99.6342 111.614L100.125 110.74Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M118.524 116.464L106.458 109.695C104.527 108.611 102.083 109.299 100.999 111.23L100.508 112.105C99.4251 114.036 100.112 116.481 102.044 117.564L114.11 124.333C116.042 125.416 118.486 124.729 119.569 122.797L120.06 121.923C121.144 119.991 120.456 117.547 118.524 116.464ZM106.949 108.82C104.534 107.466 101.479 108.325 100.125 110.74L99.6342 111.614C98.2796 114.028 99.139 117.084 101.553 118.439L113.619 125.207C116.034 126.561 119.089 125.702 120.444 123.288L120.934 122.414C122.289 119.999 121.429 116.944 119.015 115.589L106.949 108.82Z" fill="white"/>
            <path d="M109.325 94.7492C110.679 92.3349 113.735 91.4755 116.149 92.8302L150.424 112.058C152.838 113.412 153.697 116.467 152.343 118.881L151.853 119.756C150.498 122.17 147.443 123.03 145.028 121.675L110.753 102.448C108.339 101.094 107.48 98.0381 108.834 95.6238L109.325 94.7492Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M149.933 112.932L115.658 93.7043C113.727 92.621 111.283 93.3081 110.199 95.2397L109.709 96.1144C108.625 98.046 109.312 100.49 111.244 101.574L145.519 120.801C147.45 121.884 149.895 121.197 150.978 119.266L151.468 118.391C152.552 116.459 151.865 114.015 149.933 112.932ZM116.149 92.8302C113.735 91.4755 110.679 92.3349 109.325 94.7492L108.834 95.6238C107.48 98.0381 108.339 101.094 110.753 102.448L145.028 121.675C147.443 123.03 150.498 122.17 151.853 119.756L152.343 118.881C153.697 116.467 152.838 113.412 150.424 112.058L116.149 92.8302Z" fill="white"/>
            <path d="M118.35 78.6613C119.705 76.247 122.76 75.3876 125.174 76.7423L159.449 95.9691C161.863 97.3237 162.723 100.379 161.368 102.794L160.878 103.668C159.523 106.083 156.468 106.942 154.054 105.587L119.779 86.3599C117.364 85.0057 116.505 81.9502 117.859 79.5359L118.35 78.6613Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M158.959 96.8437L124.684 77.6164C122.752 76.5331 120.308 77.2202 119.224 79.1518L118.734 80.0265C117.65 81.9576 118.338 84.4019 120.269 85.4858L154.544 104.713C156.476 105.796 158.92 105.109 160.003 103.177L160.494 102.303C161.577 100.371 160.89 97.9271 158.959 96.8437ZM125.174 76.7423C122.76 75.3876 119.705 76.247 118.35 78.6613L117.859 79.5359C116.505 81.9502 117.364 85.0057 119.779 86.3599L154.054 105.587C156.468 106.942 159.523 106.083 160.878 103.668L161.368 102.794C162.723 100.379 161.863 97.3237 159.449 95.9691L125.174 76.7423Z" fill="white"/>
            <path d="M144.894 118.841C146.391 119.681 148.286 119.148 149.125 117.651C149.965 116.154 149.432 114.26 147.935 113.42C146.438 112.58 144.544 113.113 143.704 114.61C142.864 116.107 143.397 118.001 144.894 118.841Z" fill="#EE9986"/>
            <path d="M195.593 138.477H195.118V142.866H195.593V138.477Z" fill="#F2F2F2"/>
            <path d="M152.872 193.945H96.6646V193.541H152.468V173.942H101.39L98.9086 168.776L99.2733 168.601L101.644 173.538H152.872V193.945Z" fill="#718096"/>
            <path d="M104.146 203.846C106.49 203.846 108.391 201.946 108.391 199.603C108.391 197.259 106.49 195.359 104.146 195.359C101.8 195.359 99.8998 197.259 99.8998 199.603C99.8998 201.946 101.8 203.846 104.146 203.846Z" fill="#4A5568"/>
            <path d="M145.998 203.846C148.342 203.846 150.243 201.946 150.243 199.603C150.243 197.259 148.342 195.359 145.998 195.359C143.652 195.359 141.751 197.259 141.751 199.603C141.751 201.946 143.652 203.846 145.998 203.846Z" fill="#4A5568"/>
            <path d="M158.884 167.274H95.7062L82.0361 122.62H172.962L172.879 122.882L158.884 167.274ZM96.0055 166.87H158.587L172.41 123.024H82.5831L96.0055 166.87Z" fill="#718096"/>
            <path d="M153.952 164.95H98.4614L86.4542 125.348H166.317L166.245 125.581L153.952 164.95Z" fill="#E6FFFA"/>
            <path d="M174.094 118.63L173.703 118.527L176.372 108.476H191.893V108.88H176.683L174.094 118.63Z" fill="#718096"/>
            <path d="M168.418 136.157H86.4536V136.561H168.418V136.157Z" fill="#718096"/>
            <path d="M163.724 151.045H91.0114V151.45H163.724V151.045Z" fill="#718096"/>
            <path d="M127.7 122.822H127.296V167.072H127.7V122.822Z" fill="#718096"/>
            <path d="M145.804 122.809L142.902 167.058L143.305 167.084L146.208 122.835L145.804 122.809Z" fill="#718096"/>
            <path d="M109.2 122.809L108.796 122.835L111.682 167.085L112.085 167.059L109.2 122.809Z" fill="#718096"/>
            <path d="M221.646 203.736H8.9574V204.21H221.646V203.736Z" fill="#718096"/>
            <path d="M56.4911 110.722H23.2588V111.197H56.4911V110.722Z" fill="#F2F2F2"/>
            <path d="M32.7538 106.452H32.2791V110.84H32.7538V106.452Z" fill="#F2F2F2"/>
            <path d="M47.2338 106.452H46.759V110.84H47.2338V106.452Z" fill="#F2F2F2"/>
            <path d="M68.1226 40.5039H34.8903V40.9783H68.1226V40.5039Z" fill="#F2F2F2"/>
            <path d="M59.1025 40.8599H58.6278V45.2485H59.1025V40.8599Z" fill="#F2F2F2"/>
            <path d="M44.6227 40.8599H44.1479V45.2485H44.6227V40.8599Z" fill="#F2F2F2"/>
            <path d="M92.5726 87.5928H92.0979V91.9814H92.5726V87.5928Z" fill="#F2F2F2"/>
            <path d="M78.0928 87.5928H77.618V91.9814H78.0928V87.5928Z" fill="#F2F2F2"/>
            <path d="M45.0973 87H11.8647V87.4742H45.0973V87Z" fill="#F2F2F2"/>
            <path d="M36.077 87.3557H35.6023V91.7443H36.077V87.3557Z" fill="#F2F2F2"/>
            <path d="M21.5973 87.3557H21.1226V91.7443H21.5973V87.3557Z" fill="#F2F2F2"/>
            <path d="M84.9767 63.2776H51.7439V63.7518H84.9767V63.2776Z" fill="#F2F2F2"/>
            <path d="M61.2391 59.0071H60.7644V63.3957H61.2391V59.0071Z" fill="#F2F2F2"/>
            <path d="M75.719 59.0071H75.2443V63.3957H75.719V59.0071Z" fill="#F2F2F2"/>
            </svg>
            
              <h3 className="text-xl sm:text-2xl md:text-3xl mx-4 mt-4 font-bold text-gray-700">Hello {this.props.auth.user.name}. <br className="sm:hidden" /> Welcome to <span className="text-orange-base">Pantriful</span>!</h3>
              <p className="px-8 sm:px-0 sm:max-w-xl mx-auto mt-2 px-4 text-md sm:text-lg text-gray-600 leading-relaxed sm:leading-loose">Letâ€™s get to know you better so we can tailor the experience to fit your needs and preferences.</p>
              <Link className="inline-block mt-4 bg-green-400 sm:hover:bg-green-500 py-2 sm:py-3 px-12 sm:px-16 sm:text-lg text-white rounded-lg font-bold" to="/create-food-profile">
                Get started!
              </Link>
            </div>
          </div>
        );
      }
    }

    return <div>{dashboardContent}</div>;
  }
}

Dashboard.proptypes = {
  getCurrentProfile: PropTypes.func.isRequired,
  auth: PropTypes.object.isRequired,
  profile: PropTypes.object.isRequired
};

const mapStateToProps = state => ({
  profile: state.profile,
  auth: state.auth,
  lists: state.lists
});

export default connect(
  mapStateToProps,
  { getCurrentProfile, getLists }
)(Dashboard);
